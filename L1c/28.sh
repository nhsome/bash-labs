#!/bin/bash

# Выполнить рекурсивный поиск в заданной директории
# таких файлов, которые связаны с тем же индексным
# дескриптором (inode), что и заданный файл (то есть
# связаны с последним через жесткие ссылки). Одному
# найденному файлу должна соответствовать одна строка в
# списке. Имена файлов должны быть полными (начинаться
# с /). То, что найдены именно нужные файлы, должно быть
# очевидно из содержания листинга. Параметры: имя файла
# и имя директории. Последний параметр — необязательный;
# по умолчанию поиск выполныется в текущей директории.

# Если количество аргументов меньше одного, переменная с названием содержит число -- количество пришедших аругментов
if [ "$#" -lt 1 ]; then
	echo "Usage: $0 file [dir]" >&2 # Выводим "помощь" по использованию скрипта на стандартный поток ошибок
	exit 2 # Завершаемся с кодом разврата 2
fi

FILE=$1# Назначаем переменной FILE первый пришедший аргумент. Нулевой аргумент -- имя скрипта
# Назначаем переменной DIR второй аргумент скрипта. Если второй позиционный аргумент не опеределён, то подставляем значение по умолчанию.
# В данном случае это будет результат команды pwd, чтобы выполнялось условие "пути до файлов должны быть полные"
DIR=${2:-`pwd`}

find "$DIR" -samefile "$FILE" -printf "%i %p\n"
